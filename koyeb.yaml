name: kaboom-game
type: web
env:
  - name: NODE_ENV
    value: production
  - name: PORT
    value: 8000
  - name: POSTGRES_USER
    value: postgres
  - name: POSTGRES_HOST
    value: postgres
  - name: POSTGRES_DB
    value: kaboom_game
  - name: POSTGRES_PORT
    value: "5432"
  - name: REDIS_URL
    value: redis://redis:6379
build:
  builder: nodejs
  buildCommand: npm install
  startCommand: ./start.sh
routes:
  - path: /
    protocol: http
    port: 8000
healthcheck:
  path: /api/health
  port: 8000
  interval: 30s
  timeout: 10s
  retries: 5
  initialDelay: 30s
